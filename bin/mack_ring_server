#!/usr/local/bin/ruby
require 'rubygems'
require 'daemons'
require 'rinda/ring'
require 'rinda/tuplespace'
require 'fileutils'

FileUtils.mkdir_p(File.join("tmp", "pids"))

Daemons.run_proc('mack_ring_server', {:dir_mode => :normal, :dir => File.join("tmp", "pids"), :monitor => true, :multiple => false}) do
  puts 'Starting mack_ring_server...'
  DRb.start_service
  Rinda::RingServer.new(Rinda::TupleSpace.new)
  DRb.thread.join
end                                                                                                                                                          